- name: Clone repo with Dockerfile
  ansible.builtin.git:
    repo: 'https://github.com/frankja2/nodejs-demoapp.git'
    dest: '/tmp/dockerfile-repo'
    version: main

- name: Build and push Docker image
  community.docker.docker_image:
    build:
      path: "/tmp/dockerfile-repo"
    name: "10.0.0.215:5000/nodejs-demoapp:v2"
    source: build
    push: yes
